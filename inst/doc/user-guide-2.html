<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Pedro J. Aphalo" />

<meta name="date" content="2021-02-10" />

<title>User Guide: 2 Manipulating ggplots</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">User Guide: 2 Manipulating ggplots</h1>
<h3 class="subtitle">‘gginnards’ 0.0.4</h3>
<h4 class="author">Pedro J. Aphalo</h4>
<h4 class="date">2021-02-10</h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#preliminaries">Preliminaries</a></li>
<li><a href="#exploring-how-ggplots-are-stored">Exploring how ggplots are stored</a></li>
<li><a href="#manipulation-of-plot-layers">Manipulation of plot layers</a></li>
<li><a href="#replacing-scales-coordinates-whole-themes-and-data.">Replacing scales, coordinates, whole themes and data.</a></li>
<li><a href="#editing-theme-elements">Editing theme elements</a></li>
<li><a href="#removing-unused-data">Removing unused data</a></li>
<li><a href="#attributes-of-the-embedded-data-object">Attributes of the embedded data object</a></li>
<li><a href="#coda">Coda</a></li>
</ul>
</div>

<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The functions described here are not expected to be useful in everyday plotting as when using the <em>grammar of graphics</em> one can simply change the order in which layers are added to a ggplot, or remove unused variables from the data before passing it as argument to the <code>ggplot()</code> constructor.</p>
<p>However, if one uses high level methods like <code>autoplot()</code> or other functions that automatically produce a full plot using ‘ggplot2’ internally, one may need to add, move or delete layers so as to profit from such canned methods and retain enough flexibility.</p>
<p>Some time ago I needed to manipulate the layers of a <code>ggplot</code>, and found a <a href="https://stackoverflow.com/questions/13407236/remove-a-layer-from-a-ggplot2-chart">matching question in Stackoverflow</a>. I used the answers found in Stackoverflow as the starting point for writing the functions described in the first part of this vignette.</p>
<p>In a <code>ggplot</code> object, layers reside in a list, and their positions in the list determine the plotting order when generating the graphical output. The <em>grammar of graphics</em> treats the list of layers as a <em>stack</em> using only <em>push</em> operations. In other words, always the most recently added layer resides at the end of the list, and during rendering over-plots all layers previously added. The functions described in this vignette allow overriding the <strong>normal</strong> syntax at the cost of breaking the expectations of the grammar. These functions are, as told above, to be used only in exceptional cases. This notwithstanding, they are rather easy to use and the user interface is consistent across all of them. Moreover, they are designed to return objects that are identical to objects created using the normal syntax rules of the <em>grammar of graphics</em>. The table below list the names and purpose of these functions.</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>delete_layers()</code></td>
<td>delete one or more layers</td>
</tr>
<tr class="even">
<td><code>append_layers()</code></td>
<td>append layers at a specific position</td>
</tr>
<tr class="odd">
<td><code>move_layers()</code></td>
<td>move layers to an absolute position</td>
</tr>
<tr class="even">
<td><code>shift_layers()</code></td>
<td>move layers to a relative position</td>
</tr>
<tr class="odd">
<td><code>which_layers()</code></td>
<td>obtain the index positions of layers</td>
</tr>
<tr class="even">
<td><code>extract_layers()</code></td>
<td>extract matched or indexed layers</td>
</tr>
<tr class="odd">
<td><code>num_layers()</code></td>
<td>obtain number of layers</td>
</tr>
<tr class="even">
<td><code>top_layer()</code></td>
<td>obtain position of top layer</td>
</tr>
<tr class="odd">
<td><code>bottom_layer()</code></td>
<td>obtain position of bottom layer</td>
</tr>
</tbody>
</table>
<p>Although their definitions do not rely on code internal to ‘ggplot2’, they rely on the internal structure of objects belonging to class <code>gg</code> and <code>ggplot</code>. Consequently, long-term backwards and forward compatibility cannot be guaranteed, or even expected.</p>
</div>
<div id="preliminaries" class="section level2">
<h2>Preliminaries</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gginnards)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>We generate some artificial data and create a data frame with them.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">4321</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># generate artificial data</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>my.data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">group =</span> <span class="fu">factor</span>(<span class="fu">rep</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], <span class="at">each =</span> <span class="dv">30</span>)),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">panel =</span> <span class="fu">factor</span>(<span class="fu">rep</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="at">each =</span> <span class="dv">60</span>)),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">40</span>),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">unused =</span> <span class="st">&quot;garbage&quot;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>We add attributes to the data frame with the fake data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(my.data, <span class="st">&quot;my.atr.char&quot;</span>) <span class="ot">&lt;-</span> <span class="st">&quot;my.atr.value&quot;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(my.data, <span class="st">&quot;my.atr.num&quot;</span>) <span class="ot">&lt;-</span> <span class="dv">12345678</span></span></code></pre></div>
<p>We change the default theme to an uncluttered one.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>old_theme <span class="ot">&lt;-</span> <span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span></code></pre></div>
<p>We generate a plot to be used later to demonstrate the use of the functions.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(my.data, <span class="fu">aes</span>(group, y)) <span class="sc">+</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_se, <span class="at">colour =</span> <span class="st">&quot;cornflowerblue&quot;</span>, <span class="at">size =</span> <span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>panel, <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span>, <span class="at">labeller =</span> label_both)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="exploring-how-ggplots-are-stored" class="section level2">
<h2>Exploring how ggplots are stored</h2>
<p>To display summary textual information about a <code>gg</code> object we use method <code>summary()</code> from package ‘ggplot2’, while methods <code>print()</code> and <code>plot()</code> will display the actual plot.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(p)</span></code></pre></div>
<pre><code>## data: group, panel, y, unused [120x4]
## mapping:  x = ~group, y = ~y
## faceting: &lt;ggproto object: Class FacetWrap, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetWrap, Facet, gg&gt;
## -----------------------------------
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity 
## 
## geom_pointrange: na.rm = FALSE, orientation = NA, colour = cornflowerblue, size = 1.3, flipped_aes = FALSE
## stat_summary: fun.data = function (x, mult = 1) 
## {
##     x &lt;- stats::na.omit(x)
##     se &lt;- mult * sqrt(stats::var(x)/length(x))
##     mean &lt;- mean(x)
##     new_data_frame(list(y = mean, ymin = mean - se, ymax = mean + se), n = 1)
## }, fun = NULL, fun.max = NULL, fun.min = NULL, fun.args = list(), na.rm = FALSE, orientation = NA
## position_identity</code></pre>
<p>Layers in a ggplot object are stored in a list as nameless members. This means that they have to be accessed using numerical indexes, and that we need to use some indirect way of finding the indexes corresponding to the layers of interest.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p<span class="sc">$</span>layers)</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>The output of <code>summary()</code> is compact.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(p<span class="sc">$</span>layers)</span></code></pre></div>
<pre><code>##      Length Class         Mode       
## [1,] 11     LayerInstance environment
## [2,] 11     LayerInstance environment</code></pre>
<p>The default <code>print()</code> method for a list of layers displays only a small part of the information in a layer.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p<span class="sc">$</span>layers)</span></code></pre></div>
<pre><code>## [[1]]
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity 
## 
## [[2]]
## geom_pointrange: na.rm = FALSE, orientation = NA, colour = cornflowerblue, size = 1.3, flipped_aes = FALSE
## stat_summary: fun.data = function (x, mult = 1) 
## {
##     x &lt;- stats::na.omit(x)
##     se &lt;- mult * sqrt(stats::var(x)/length(x))
##     mean &lt;- mean(x)
##     new_data_frame(list(y = mean, ymin = mean - se, ymax = mean + se), n = 1)
## }, fun = NULL, fun.max = NULL, fun.min = NULL, fun.args = list(), na.rm = FALSE, orientation = NA
## position_identity</code></pre>
<p>To see all the fields, we need to use <code>str()</code>, which we use here for a single layer.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(p<span class="sc">$</span>layers[[<span class="dv">1</span>]])</span></code></pre></div>
<pre><code>## Classes &#39;LayerInstance&#39;, &#39;Layer&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class LayerInstance, Layer, gg&gt;
##     aes_params: list
##     compute_aesthetics: function
##     compute_geom_1: function
##     compute_geom_2: function
##     compute_position: function
##     compute_statistic: function
##     data: waiver
##     draw_geom: function
##     finish_statistics: function
##     geom: &lt;ggproto object: Class GeomPoint, Geom, gg&gt;
##         aesthetics: function
##         default_aes: uneval
##         draw_group: function
##         draw_key: function
##         draw_layer: function
##         draw_panel: function
##         extra_params: na.rm
##         handle_na: function
##         non_missing_aes: size shape colour
##         optional_aes: 
##         parameters: function
##         required_aes: x y
##         setup_data: function
##         setup_params: function
##         use_defaults: function
##         super:  &lt;ggproto object: Class Geom, gg&gt;
##     geom_params: list
##     inherit.aes: TRUE
##     layer_data: function
##     map_statistic: function
##     mapping: NULL
##     position: &lt;ggproto object: Class PositionIdentity, Position, gg&gt;
##         compute_layer: function
##         compute_panel: function
##         required_aes: 
##         setup_data: function
##         setup_params: function
##         super:  &lt;ggproto object: Class Position, gg&gt;
##     print: function
##     setup_layer: function
##     show.legend: NA
##     stat: &lt;ggproto object: Class StatIdentity, Stat, gg&gt;
##         aesthetics: function
##         compute_group: function
##         compute_layer: function
##         compute_panel: function
##         default_aes: uneval
##         extra_params: na.rm
##         finish_layer: function
##         non_missing_aes: 
##         optional_aes: 
##         parameters: function
##         required_aes: 
##         retransform: TRUE
##         setup_data: function
##         setup_params: function
##         super:  &lt;ggproto object: Class Stat, gg&gt;
##     stat_params: list
##     super:  &lt;ggproto object: Class Layer, gg&gt;</code></pre>
</div>
<div id="manipulation-of-plot-layers" class="section level2">
<h2>Manipulation of plot layers</h2>
<p>We start by using <code>which_layers()</code> as it produces simply a vector of indexes into the list of layers. The third statement is useless here, but demonstrates how layers are selected in all the functions described in this document. We can see that each layer, as described in the first volume of this User Guide, contains one geometry and one statistic.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which_layers</span>(p, <span class="st">&quot;StatIdentity&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which_layers</span>(p, <span class="st">&quot;GeomPointrange&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which_layers</span>(p, <span class="st">&quot;StatSummary&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which_layers</span>(p, <span class="at">idx =</span> 1L)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>We can also easily extract matching layers with <code>extract_layers()</code>. Here one layer is returned, and displayed using the default <code>print()</code> method. Method <code>str()</code> can also be used as shown above.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity</code></pre>
<p>With <code>delete_layers()</code> we can remove layers from a plot, selecting them using the match to a class, as shown here, or by a positional index as shown next.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">delete_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">delete_layers</span>(p, <span class="at">idx =</span> 1L)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">delete_layers</span>(p, <span class="st">&quot;StatSummary&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>With <code>move_layers()</code> we can alter the stacking order of layers. The layers to move are selected in the same way as in the examples above, while <code>position</code> gives where to move the layers to. Two character strings, <code>&quot;top&quot;</code> and <code>&quot;bottom&quot;</code> are accepted as <code>position</code> argument, as well as <code>integer</code>s. In the later case, the layer(s) is/are appended after the supplied position with reference to the list of layers not being moved.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">move_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>, <span class="at">position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>The equivalent operation using a relative position. A positive value for <code>shift</code> is interpreted as an upward displacement and a negative one as downwards displacement.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shift_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>, <span class="at">shift =</span> <span class="sc">+</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Here we show how to add a layer behind all other layers.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append_layers</span>(p, <span class="fu">geom_line</span>(<span class="at">colour =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>), <span class="at">position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>It is also possible to append the new layer immediately above an arbitrary existing layer using a numeric index, which as shown here can be also obtained by matching to a class name. In this example we insert a new layer in-between two layers already present in the plot. As with the <code>+</code> operator of the Grammar of Graphics, <code>object</code> also accepts a list of layers as argument (no example shown).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append_layers</span>(p, <span class="at">object =</span> <span class="fu">geom_line</span>(<span class="at">colour =</span> <span class="st">&quot;orange&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>), </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">position =</span> <span class="fu">which_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Annotations add layers, so they can be manipulated in the same way as other layers.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> p <span class="sc">+</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;text label&quot;</span>, <span class="at">x =</span> <span class="fl">1.1</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">delete_layers</span>(p1, <span class="st">&quot;GeomText&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAGACAMAAABFpiBcAAABGlBMVEUAAAAAADoAAGYAOpAAZrYZGT8ZGWIZP2IZP4EZYp8aGhozMzM6AAA6ADo6AGY6kNs/GRk/GT8/GWI/P4E/gb1NTU1NTW5NTY5Nbo5NbqtNjshiGRliGT9iGWJiPxliP4FiYj9iYmJin9lkle1mAABmADpmtrZmtv9uTU1uTW5uTY5ubqtuq+SBPxmBPz+BP2KBYhmBgT+BvZ+BvdmOTU2OTW6OTY6Obk2Ojo6OyP+QOgCQkDqQkGaQtpCQ2/+fYhmf2dmrbk2ryKur5P+2ZgC2//+9gT+92dnIjk3Ijm7I///Zn2LZvYHZ2Z/Z2b3Z2dnbkDrb///kq27k///r6+v/tmb/yI7/25D/5Kv//7b//8j//9v//+T///8NnT+6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAOH0lEQVR4nO3di3sU1RnH8QXRaqKo1WgR7YXQ0uKlF9RWarlIgRS5KXJn//9/ozubbAJZNuz8cs67v/PO9/M8KKiTZ3zzzcw5k00yGgPGRqs+AeAgBAprBAprBAprBAprBAprfQJdR29MTqUEegc9rTM5EYGGIFAVgYYgUBWBhiBQFYGGIFAVgYYgUBWBhiBQFYGGIFBVwkBv/vrS7Le3Pj23yjPZ00agu5O7+d7axKnVns223IH++IcPV3kme1oLtPvNzfcdProbDfTWZ39fe/3c9of6qTs3P/jb9OP91sm1Ny51092Z9O2v/vG766s+1SmfQJea3PSvt78iUNmtk29e//GNS90tvJvqex/e+fHN63cufnjn2lvPXUFvfnD9osV9yinQZSa3fQX9wOGDu9lAT80+wm99Nv2wn/zqhr7zp23XJtN/a4Vnuccp0CUmt70GfZNAZdPdT3d1vLg2uTfNxnxyMtXXz+2O+faXa92/Xe2ZbjMKdJnJbd/iv3S4+zQc6OQ60F0OdhZO3Zg/m853b8zdPcrjHu8V6KsnN/2NxehaDfTkW93aaTrf98/tjLlbSe38w6lr3YA97vFGgS4zuelvPJ7RtRrop7+f7kWvra396renZmOe3KleP7e7F73910t3zMbcyOR4DnpoHtktzynQJidHoHURqKrRQFvjE2hrCDQEgaoINASBqqRA0RuTUymB9vhvl/VLhbcpqnEq6y/8rahhTI5A9xCoikBDEKiKQEMQqIpAQxCoikBDEKiKQEMQqIpAQxCoikBDEKiKQEMQqIpAQxCoikBDEKgqcaCjkc1PcahyKvUCNZpc4kBHI5s51zmVaoEaTY5AQxCojkADEKis5uKIQGcaC9RoDVp1cgQ601qgPrt4Ag1BoKrMgRrdqFp7zOQTaOY1qNOYeVAvy7uLH8qYmVxvBDqHQFU2gf6CntaZnIgr6ByuoCqbK2iF8xjGmJlcbwQ6h0BVBBqCQFUEGoJAVQQagkBVBBqCQFUEGoJAVQQagkBVBBqCQFUEGoJAVQQagkBVBBqCQFUEGoJAVQQagkBVBBqCQFUEGoJAVQQaobGv6hzI18MS6ExjXxc/lO8oQKAzBKpKHajNlAlUljnQoYw59eQyr0GNxkygury7eKMxE6gub6BGa1AeM+kSB+qzi+dBvY5AQxCoikBDEKiKQEMQqCpxoEZLfTZJKp6DRuAxk4rPJIUgUBWBhiBQVeZAh7KSYnK9mQQ6kL0ok+uNQOcQqIpAQxCoikBDEKiKQEMQqIpAQxCoaqWBPjp7Y/8xJQ1jzEyut2UDfbDxMYHqCFS1ZKBbH/3AFfQQCFTV9xa/3ln1z29szyzQVZ9He1iDzuEKqnK4gj5/TEnDGDOT641A5xCoikBDEKiKQEMQqIrPJIUgUBWBhiBQFYGGIFAVgYYgUBWBhiBQFYFG4IvmVJm/aM5nzHzZsSrzlx0PZcxMrjcC3YdAVQQagkBlrEFDsEmSsYsPwWMmFYGGIFAVgYYgUBWBRmANqsq8SfIJlF28KvNjJgJVEegBxxRkM2UClWUOdChjTj25zGtQozETqC7vLt5ozASqyxuo0RqUx0y6xIH67OIJVJZ4DWoUKLd4VeZdPIGqCPSAY0oiUA2BHnBMSTaBsgaVsQaNwauZVIl38UbXgcYCNZpc4iuo0UqqsUCNJpd5DWo0ZgJVEWgQAtVkDtRpJdVWoE6TS7wGHcpelMn1RqBzCFRFoCEIVEWgIQhUlThQo6V+Y4EaTc5nk1T8BzJOn1AUf6tG1gcwuTqn4nEFNXqa19gV1GhymZ+DGo2ZQFWZA3VaSbUVqNPkfNag5U9jIHtRJtcbgc4hUBWBhiBQFYGGIFAVgYYgUBWBhiBQFYGGIFBV4kAH8jQvd6CJn4MO5fMhqQPN/JkkAtUR6MJjyiFQHYEuPKYgmz5Zg+oSr0GdAm1sF280ucSBGt3iGwt0tLm5aTK5zLd4AlUR6AHHlOMU6OQ9Xv6NEqjKI1CnlVRbgW5uVjlfSeI1qNNetKVAN2cKv10NgUaoc8+sE+jmplOhqW/xBCrY3LQqNHWgPmvQdgLd3PQqNHOgRrv4Ou/sIQSaeQ1qE2itd3eFQDf3K/i2RXlfD+oSaLV3N4GqPAI1WYPWe38TqMokUItdfMV3+CACTbwGJdD+7ALNvIu3CLTme3wIu3gCrYxAD6fqE2QCbS9Qt88kVX0Vw6oDdZhwc4GafS6eQCtrL1CzVzMlDtTjZbcVF3VDeD1o5jUogcps+qz7KgYC7dTbdeT/ko9aqw2PQF1uVNV2HfUCHcirGF4I9PHpIxeWOaYUo6V+5etA2kCr33v2XUH/Oxq99tPz/+DJ1xsn7u0/ppBqH3ySqiuprC+zqb96n7vFPz49Gr27+6dnl78b//zJ/mPKqPfBp6lyFgSqWrwG7RI9enX790++vTF+dPbGvmOKqPj/Jp9Q+Tea+xa/uV/Bt70o0Luj0bHJrX7nRv/o83vjJ99c6f77Tsmfxbjvf63km5ZPqPwbnQVa/A1b/KzOuUALvu2XBvr0/Gh0pvvN/Z1L6IMTs0Cfj7qEmh988hmVf6NcQVUv38XPbu0ze1fQ548pgUAPyaDPldziX1RvDUqghzWM14G9ItBnl7+otIv3C5RvYNtfxffhkp9JqvYc1C5QvgW4YPWBvvSYIsz6bC5QhzVo/GeSljumCAI9FItd/Dj4c/HLHlOGV5+trUFdAs38aiavPglUVec9aBCo06uZuMUfQpX3oEOgPq8HHRPoISQO1OZ14QR6CIkDNfrKmsbWoCaPmaYINAJXUFXqb31DoCICPeCYgghURKAHHFOQzZRZg+oSf3/QoVwHUk8u83dYNhozgcq4gkYgUFXmNajRmBtbgxpNjkCDtPXz4n0mlzlQp71oW4E6TS7xGnQoY849OXbxEdgk6Qg0AIHqCDQAgeryBuq0kmINKkscqMVXd+9oaxc/kMkR6B4CVRFoCAJVEWgIAlURaAgCVRFoCAJVJQ7U6GEJj5lkeQM1etzMg3odgQYgUB2BBiBQXd5AnVZSrEFVmV8P6rMX5QqqSv2KegIVEegBx5REoBoCPeCYkmwCZQ0q81mDFvxRjAOxzuREXEHn8KlOVeLHTAMZM5PrjUDnEKiKQEMQqIpAQxCoikBDEKiKQEMQqIpAQxCoikBDEKiKQEMQqIpAQxCoikBDEKiKQEMQqIpAQxCoikBDEKiKQEMQqCpxoAN5XXjuySUOdChfWZN6cgQagkBlPl+TVPwsjMZMoKrMX9U5lDEzud4IdB8CVWUO1GgvSqCq1IEaPc3jMZMq8SbJKVAe1MvyPmYaypiZXG8mgRrdqBoL1GhyiW/xRkv9xgI1mlzmTZLRmAlURaBBCFSTOVCnlVRbgTpNLvEadCh7USbXG4HOIVAVgYYgUBWBhiBQFYGGIFAVgYYgUBWBhiBQFYGGIFDVSgN9dPbG/mNKGsaYmVxvywb6YONjAtURqGrJQLc++oEr6CEQqKrvLX69s+ofj9eeWaCrPo/2sAadwxVUtZor6NbGxidjAj0cAlVxBZ1DoCoCDUGgKgINQaAqPpMUgkBVBBqCQFUEGoJAVQQagkBVBBqCQFUEGoJAVQQagkBVBBqCQFWJAx3I98fIHWji7ywylO8wlDrQzN+biUB1BLrwmHIIVEegC48pyKZP1qA61qARuIKqMl9BCVRHoAuPKYdAdQS68JhyCFRHoAuPKYdAdQS68JhyCFRHoAuPKcimTx4z6RI/ZnIaMy8WkSV+schAxszkeiPQOQSqItAQBKoi0BAEqkocqNEuvrFAjSaXeBdv9By0sUCNJpf5OajRmAlURaBBCFSTOVCnlVRbgTpNLvEadCh7USbXG4HOIVAVgYYgUBWBhiBQFYGGIFAVgYYgUBWBhiBQFYGGIFCVTaCr/vmN7VlnciKuoHO4gqpsrqAVzmMYY2ZyvRHoHAJVEWgIAlURaAgCVSUOdCAvGssdaOKX2w3lZbepA838gmUC1RHowmPKIVAdgS48piCbPlmD6hKvQZ3GzC5elngXP5AxM7neCHQOgaoINASBqgg0BIGqCDQEgaoINASBqgg0BIGqCDQEgaoINASBqgg0BIGqbAJFb0xOJQRaQ41ri8joVJZhdLo1T4VAdxmdyjKMTpdAQxidyjKMTjdzoMCBCBTWCBTWCBTWCBTWCHTb1nerPoOGPbtcb3oEuo1ADyFtoI/+vLFhEsbWv2xOZSlPvt746MqqT2Jqcia/+WfOQJ98c2X86OyNFZ7Bnq0T91xOZRndNevBiXurPo3O1hfjBxU/tld9i3/yrUcV3S2+odu8zwdT9w5Me4sfb21sfOwx6f9daSvQzy2unuOdD5WKk1vpLf7r72wuBZMR17wOlOYyttxX0G7Kj/7isdTf+sTonf5qXRIm55t5DfrzRtUNYB+TXbzJrng5Prv4Z5fT7uKBVyJQWCNQWCNQWCNQWCNQWCNQWCNQWCNQWCPQwh6fHh35z/GrD4//e3T06tPzo9Gx8fjhOxemf3n4zvej0Ws/rfoUm0KgZT0+/e7k19GrD9+ehPn0/LHpr91A3+6aPbbqc2wKgZZ1/+jV8fhuF+iZnT9M/rIX6JmdyymWRaBl3e3u4A+Pbzd5f/qH7tZ+Ye/vj0+fWfVJtoRAyyLQwgi0rBfu6vePXHjJLf741VWfZEsItKzdTVLX5GyT1P3Dp+ePsEkSEGhh3WOm73cCHe88Zho/fHs0+tMftx8z0WcvBFrB/QXPOtnA90egZXXLzoV3cQLtj0ALuztafBcn0P4IFNYIFNYIFNYIFNYIFNYIFNYIFNb+D5J5rO71wcp1AAAAAElFTkSuQmCC" style="display: block; margin: auto;" /></p>
</div>
<div id="replacing-scales-coordinates-whole-themes-and-data." class="section level2">
<h2>Replacing scales, coordinates, whole themes and data.</h2>
<p>Elements that are normally <em>added</em> to a ggplot with operator <code>+</code>, such as scales, themes, aesthetics can be replaced with the <code>%+%</code> operator. The situation with layers is different as a plot may contain multiple layers and layers are nameless. With layers <code>%+%</code> is not a replacement operator.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">num_layers</span>(p)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">num_layers</span>(p <span class="sc">%+%</span> <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">num_layers</span>(p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_bw</span>()</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>p1</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">theme_void</span>()</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">%+%</span> <span class="fu">theme_void</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /><img src="data:image/png;base64,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" style="display: block; margin: auto;" /><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="editing-theme-elements" class="section level2">
<h2>Editing theme elements</h2>
<p>Method <code>summary()</code> is available for themes.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">theme_bw</span>())</span></code></pre></div>
<p>However, to see the actual values stored, we need to use <code>str()</code>. To avoid excessive output we first find the names for the elements of the theme and then look as how the default text settings are stored.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">theme_bw</span>())</span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">theme_bw</span>()<span class="sc">$</span>text)</span></code></pre></div>
<p>Themes can be modified using <code>theme()</code>. See the ‘ggplot2’ documentation for details.</p>
</div>
<div id="removing-unused-data" class="section level2">
<h2>Removing unused data</h2>
<p>The argument passed through <code>data</code> to <code>ggplot()</code> or a layer is stored in whole in the <code>ggplot</code> object, even the data columns not mapped to any aesthetic. In most cases this does not matter, but in the case of huge datasets, the use of RAM and disk space can add up, and occasionally printing of each plot can slow down. The reason for storing the whole data set is that it is always possible to add layers with the grammar of graphics to an existing plot and consequently only the user can know which variables can be removed or not.</p>
<p>One obvious way of not storing unused data in <code>ggplot</code> objects is for the user to select the required variables and pass only these to the <code>ggplot()</code> constructor or layers. A less efficient alternative, but possibly easier to use for some users, is for users to drop the unused variables when they consider that a plot is ready. We show here how to do this, with a function that started as a self-imposed exercise.</p>
<p>To simplify the embedded data objects we need to find which variables are mapped to aesthetics and which are not. Here is a naive attempt at handling the possibility of mappings to expressions involving computations and multiple variables per mapping, and facets. This is naive in that it ignores mapping within layers and variables used for faceting.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>mapped.vars <span class="ot">&lt;-</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">&quot;[~*</span><span class="sc">\\</span><span class="st">%^]&quot;</span>, <span class="st">&quot; &quot;</span>, <span class="fu">as.character</span>(p<span class="sc">$</span>mapping)) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="fu">boundary</span>(<span class="st">&quot;word&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fu">names</span>(p<span class="sc">$</span>facet<span class="sc">$</span>params<span class="sc">$</span>facets))</span></code></pre></div>
<p>We need also to find which variables are present in the data.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>data.vars <span class="ot">&lt;-</span> <span class="fu">names</span>(p<span class="sc">$</span>data)</span></code></pre></div>
<p>Next we identify which variables in <code>data</code> are not used, and delete them.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>unused.vars <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(data.vars, <span class="fu">c</span>(mapped.vars))</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>keep.idxs <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span>data.vars <span class="sc">%in%</span> unused.vars)</span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> p</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">$</span>data <span class="ot">&lt;-</span> p<span class="sc">$</span>data[ , keep.idxs]</span></code></pre></div>
<p>For a data set this small, removing a single column saves very little space.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(my.data)</span></code></pre></div>
<pre><code>## 5576 bytes</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(p)</span></code></pre></div>
<pre><code>## 11872 bytes</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(p1)</span></code></pre></div>
<pre><code>## 10352 bytes</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(my.data)</span></code></pre></div>
<pre><code>## [1] &quot;group&quot;  &quot;panel&quot;  &quot;y&quot;      &quot;unused&quot;</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p<span class="sc">$</span>data)</span></code></pre></div>
<pre><code>## [1] &quot;group&quot;  &quot;panel&quot;  &quot;y&quot;      &quot;unused&quot;</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p1<span class="sc">$</span>data)</span></code></pre></div>
<pre><code>## [1] &quot;group&quot; &quot;panel&quot; &quot;y&quot;</code></pre>
<p>The plot has not changed.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>We can assemble all the code into a function for convenience, and expand the code to also recognize mappings within layers and variables used in faceting. Such a function, only cursorily tested is included in the package as <code>drop_vars()</code>. Given its design the most likely failure mode is keeping too many variables rather than removing too many.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_vars</span>(p)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>When saving <code>ggplot</code> objects to disk avoiding to carry along unused data can be beneficial. Of course, removing unused data means that they will not be available at a later time if we want to add more layers to the same saved ggplot object.</p>
<p>It was not clear to me when R does make a copy of the data embedded in a <code>ggplot</code> object and when not. R’s policy is to copy data objects lazily, or only when modified. Does the ‘ggplot2’ code modify the argument passed to its <code>data</code> parameter triggering a real copy operation or not. We can check this with the help of package ‘pryr’.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>pryr<span class="sc">::</span><span class="fu">address</span>(my.data)</span></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;pryr&#39;:
##   method      from
##   print.bytes Rcpp</code></pre>
<pre><code>## [1] &quot;0x29d53238&quot;</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> p<span class="sc">$</span>data</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>pryr<span class="sc">::</span><span class="fu">address</span>(z)</span></code></pre></div>
<pre><code>## [1] &quot;0x29d53238&quot;</code></pre>
<p>In this case, R has not created a copy. So, from the point of view of total memory usage, deleting the unused columns in <code>p</code> is not always beneficial. If the object is saved to disk or <code>my.data</code> modified in any way after <code>p</code> was created a copy of <code>my.data</code> will be created at this later time. In this simple example we modify the value of an attribute.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(my.data, <span class="st">&quot;my.atr.num&quot;</span>) <span class="ot">&lt;-</span> <span class="dv">1324567</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>pryr<span class="sc">::</span><span class="fu">address</span>(z)</span></code></pre></div>
<pre><code>## [1] &quot;0x29d53238&quot;</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>pryr<span class="sc">::</span><span class="fu">address</span>(my.data)</span></code></pre></div>
<pre><code>## [1] &quot;0x200e2a18&quot;</code></pre>
</div>
<div id="attributes-of-the-embedded-data-object" class="section level2">
<h2>Attributes of the embedded data object</h2>
<p>‘ggplot2’ version 3.1.0 and later preserves most attributes of the object passed as argument to the data parameter of the <code>ggplot()</code> constructor. The class of the object seems to be modified if it is derived from data frame or tibble, but other attributes are retained in the copy stored in the <code>gg</code> object.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_attributes</span>(p)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;group&quot;  &quot;panel&quot;  &quot;y&quot;      &quot;unused&quot;
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $row.names
##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
##  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108
## [109] 109 110 111 112 113 114 115 116 117 118 119 120
## 
## $my.atr.char
## [1] &quot;my.atr.value&quot;
## 
## $my.atr.num
## [1] 12345678</code></pre>
<p>Another interesting question is whether these user attributes are copied when data are passed to geometries and statistics. We can find out with <code>geom_debug()</code> that they are not.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_debug</span>(<span class="at">summary.fun =</span> attributes)</span></code></pre></div>
<pre><code>## $names
## [1] &quot;x&quot;     &quot;y&quot;     &quot;PANEL&quot; &quot;group&quot;
## 
## $row.names
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
## [51] 51 52 53 54 55 56 57 58 59 60
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $names
## [1] &quot;x&quot;     &quot;y&quot;     &quot;PANEL&quot; &quot;group&quot;
## 
## $row.names
##  [1]  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79
## [20]  80  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98
## [39]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117
## [58] 118 119 120
## 
## $class
## [1] &quot;data.frame&quot;</code></pre>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="coda" class="section level2">
<h2>Coda</h2>
<p>The are many other things that we could explore about ggplot objects, but a package to be submitted to CRAN cannot have too many pages of documentation, so we hope this package and its documentation can serve as a starting point for further exploration.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
